"use strict";angular.module("angular-svg-round-progress",[]).directive("roundProgress",["$timeout",function(){if(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)return{restrict:"EA",template:'<div class="round-progress"></div>',replace:!0};!function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var b=function(a,b,c,d){if(a>=0){var i,a=a>=b?b-1e-5:a,e=360/b*a,f=(90-e)*Math.PI/180,g=300+c*Math.cos(f),h=300-c*Math.sin(f),j=e>180?1:0;i=b===a?"M300,"+(300-c)+" A"+c+","+c+","+0+","+1+","+1+","+300+","+300-c:"M300,"+(300-c)+" A"+c+","+c+","+0+","+j+","+1+","+g+","+h,d.attr("d",i)}},c=function(a,b,c,d){return c*(Math.pow(a/d-1,3)+1)+b};return{restrict:"EA",scope:{current:"=",max:"=",radius:"@",color:"@",bgcolor:"@",stroke:"@"},link:function(a,d){var f=d.find("path"),g=2*a.radius+2*parseInt(a.stroke),h=-(300-a.radius-a.stroke);d.attr({width:g,height:g}),f.attr("transform","translate("+h+","+h+")"),a.$watch("current",function(d,e){var g=a.max;0>d&&(a.current=0),d>g&&(a.current=g);var h=a.radius,i=e===d?0:e||0,j=d-i,k=0,l=50;!function m(){l>=k&&(b(c(k,i,j,l),g,h,f),requestAnimationFrame(m),k++)}()})},replace:!0,template:'                <svg class="round-progress" xmlns="http://www.w3.org/2000/svg">                    <circle ng-attr-cx="{{ radius }}" ng-attr-cy="{{ radius }}" ng-attr-transform="translate({{ stroke }}, {{ stroke }})" ng-attr-r="{{ radius }}" fill="none" stroke="{{ bgcolor }}" stroke-width="{{ stroke }}"/>                    <path fill="none" stroke="{{ color }}" stroke-width="{{ stroke }}" />                </svg>'}}]);